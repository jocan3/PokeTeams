
<mat-spinner style="margin:0 auto;" *ngIf="loading"></mat-spinner>
<div *ngIf="errorMessage">
  <div class="alert alert-danger" role="alert">
    <p>{{errorMessage}}</p>
  </div>
</div>
<div *ngIf="!loading && !errorMessage">
  <div class="results-header">
    <p>source: <b>Pokemon Showdown replays</b></p> 
    <p>format: <b>{{formatDisplayName}}</b></p>
    <p>from <b>{{startDate}}</b> to <b>{{endDate}}</b></p>
  </div>
<div class="table-container mat-elevation-z8">
	<div class="teams-search-input-container">
		<mat-form-field class="teams-search-input">
		  <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
		</mat-form-field>
	</div>
  <mat-table #table [dataSource]="dataSource" matSort matSortActive="relevance" matSortDirection="desc">
    <!-- Position Column -->
    <ng-container matColumnDef="team">
      <mat-header-cell *matHeaderCellDef class="teams-sprites-column"> Team </mat-header-cell>
      <mat-cell *matCellDef="let element" class="teams-sprites-column"> 
		<mat-grid-list cols="3" (click)="seeBattleIds(element.battle_ids)">
		  <mat-grid-tile *ngFor="let pokemon of element.pokemon_ids"><span [class]="pokemon.replace(' ','') | lowercase" [class.sprite-xyicons]="pokemon"></span></mat-grid-tile>
		</mat-grid-list>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="usage_count">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Usage </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.usage_count}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="win_count">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Win </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.win_count}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="users_count">
      <mat-header-cell *matHeaderCellDef mat-sort-header class="desktop-column"> Users </mat-header-cell>
      <mat-cell *matCellDef="let element" class="desktop-column"> {{element.users_count}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="win_ratio">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="desktop-column"> Win Ratio </mat-header-cell>
        <mat-cell *matCellDef="let element" class="desktop-column"> {{element.win_ratio | number : '1.4' }} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="usage_ratio">
          <mat-header-cell *matHeaderCellDef mat-sort-header class="desktop-column"> Usage Ratio </mat-header-cell>
          <mat-cell *matCellDef="let element" class="desktop-column"> {{ element.usage_ratio | number : '1.4' }} </mat-cell>
      </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="relevance">
      <mat-header-cell *matHeaderCellDef mat-sort-header > Relevance </mat-header-cell>
      <mat-cell (click)="seeData(element.data)" *matCellDef="let element"> {{ element.relevance | number : '1.4'}} </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>
    <mat-paginator #paginator
                 [pageSize]="10"
                 [pageSizeOptions]="[ 10, 40, 120]">
  </mat-paginator>
</div>
</div>